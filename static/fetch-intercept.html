<head>
  <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mx-auto">
    <h1 class="text-xl my-4">Fetch Intercept Benchmark</h1>
  </div>
  <script>
    const htmlName = 'fetch-intercept.html';
    const log = (msg) => console.log(`${htmlName}: ${msg}`);

    const scriptURL = `${location.origin}/sw-no-fetch.js?t=${Date.now()}`;
    installServiceWorker(scriptURL, startTest);

    function installServiceWorker(scriptURL, onInstall) {
      navigator.serviceWorker.register(scriptURL);
      navigator.serviceWorker.addEventListener('controllerchange', () => {
        log('controllerchange');
        if (navigator.serviceWorker.controller?.scriptURL == scriptURL) onInstall();
      });
    }

    function startTest() {
      log('startTest');
    }
  </script>
</body>